<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="body" width="450" height="500" viewBox="0 0 450 500"><title>Clip and mask with geometry updates</title><text x="50%" y="25" class="title">Clip and mask with geometry updates <tspan x="50%" dy="1.1em" style="font-style:italic;font-size:12">(click on all shapes and see <a style="fill:#00f" xlink:href="maskClipUpdateRef.svg">maskClipUpdateRef.svg</a>)</tspan></text><script type="text/ecmascript">var svgNamespaceURI = &quot;http://www.w3.org/2000/svg&quot;; function move(evt) { var x = parseFloat(evt.target.getAttribute(&quot;x&quot;)); var y = parseFloat(evt.target.getAttribute(&quot;y&quot;)); evt.target.setAttribute(&quot;x&quot;, x+90); evt.target.setAttribute(&quot;y&quot;, y+85); }</script><defs><clipPath id="clipObjectBoundingBox" clipPathUnits="objectBoundingBox"><circle cx=".5" cy=".5" r=".5"/></clipPath><clipPath id="clipUserSpaceOnUse" clipPathUnits="userSpaceOnUse"><circle cx="340" cy="195" r="80"/></clipPath><mask id="maskObjectBoundingBox" width="1" height="1" x="0" y="0" maskContentUnits="objectBoundingBox" maskUnits="objectBoundingBox"><circle cx=".5" cy=".5" r=".5" fill="#fff"/></mask><mask id="maskUserSpaceOnUse" width="180" height="190" x="250" y="300" maskContentUnits="userSpaceOnUse" maskUnits="userSpaceOnUse"><circle cx="340" cy="390" r="80" fill="#fff"/></mask></defs><g id="test-content" transform="translate(0, -20)"><g id="board" style="fill:none;stroke:#000"><rect width="200" height="20" x="40" y="80" style="fill:#eee"/><rect width="200" height="20" x="240" y="80" style="fill:#eee"/><rect width="200" height="380" x="40" y="100"/><rect width="200" height="380" x="240" y="100"/><line x1="20" x2="440" y1="290" y2="290"/><rect width="20" height="190" x="20" y="100" style="fill:#eee"/><rect width="20" height="190" x="20" y="290" style="fill:#eee"/><g style="fill:#000;stroke:none;text-anchor:middle"><text x="134" y="94">objectBoundingBox</text><text x="314" y="94">userSpaceOnUse</text><text x="0" y="0" transform="translate(34 200)rotate(-90)">&lt;clipPath&gt;</text><text x="0" y="0" transform="translate(34 380)rotate(-90)">&lt;mask&gt;</text></g></g><rect width="90" height="85" x="50" y="110" onclick="move(evt)" style="fill:#dc143c;clip-path:url(#clipObjectBoundingBox)"/><rect width="90" height="85" x="250" y="110" onclick="move(evt)" style="fill:#dc143c;clip-path:url(#clipUserSpaceOnUse)"/><rect width="90" height="85" x="50" y="300" onclick="move(evt)" style="fill:#dc143c;mask:url(#maskObjectBoundingBox)"/><rect width="90" height="85" x="250" y="300" onclick="move(evt)" style="fill:#dc143c;mask:url(#maskUserSpaceOnUse)"/></g><script type="text/ecmascript"><![CDATA[
function onDone() {
    if (!(regardTestInstance == null)) {
        regardTestInstance.scriptDone();   
    } else {
        alert("This button only works when run in the regard framework");
    }
}
    ]]></script><g id="done" cursor="pointer" onclick="onDone()" transform="translate(195, 468)"><rect width="60" height="25" fill="#eee" stroke="#000" rx="5" ry="5"/><text x="30" y="18" font-size="14" font-weight="bold" text-anchor="middle">Done</text></g></svg>