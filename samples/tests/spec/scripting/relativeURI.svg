<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="body" width="450" height="500" onload="init()" viewBox="0 0 450 500"><title>Test of CSS with relative URIs</title><text x="50%" y="50" class="title">Test of CSS with relative URIs</text><script type="text/ecmascript"><![CDATA[
var root = document.getRootElement();

var t0 = document.getElementById('t0');
var t1 = document.getElementById('t1');
var t2 = document.getElementById('t2');
var t3 = document.getElementById('t3');
var t4 = document.getElementById('t4');
var t5 = document.getElementById('t5');
var t6 = document.getElementById('t6');
var t7 = document.getElementById('t7');
var t8 = document.getElementById('t8');
var t9 = document.getElementById('t9');
var t10 = document.getElementById('t10');
var t11 = document.getElementById('t11');
var t12 = document.getElementById('t12');
var t13 = document.getElementById('t13');
var t14 = document.getElementById('t14');

var docURL = document.getURL();

function unifyURL(str) {
  var start = str.indexOf(docURL);
  if (start == -1) return str;
  var before = str.substring(0, start);
  var after  = str.substring(start+docURL.length);
  return before + "<doc>" + after;
}

function init() {
  var view = document.getDefaultView();

  var elem = document.getElementById('xxx');
  var cssStyle = elem.getStyle();
  var computedStyle = view.getComputedStyle(elem, "");
  
  cssStyle.setProperty("fill", "url(#grad)","");
  var localStr = cssStyle.getPropertyValue("fill");
  var absStr = computedStyle.getPropertyValue("fill");
  t1.firstChild.nodeValue = unifyURL(localStr);
  t2.firstChild.nodeValue = unifyURL(absStr);

  cssStyle.setProperty("cursor", "url(#cur),crosshair","");
  localStr = cssStyle.getPropertyValue("cursor");
  absStr = computedStyle.getPropertyCSSValue("cursor");
  absStr = absStr.item(0).getCssText();
  t3.firstChild.nodeValue = unifyURL(localStr);
  t4.firstChild.nodeValue = unifyURL(absStr);

  cssStyle.setProperty("clip-path", "url(#clip)","");
  localStr = cssStyle.getPropertyValue("clip-path");
  absStr = computedStyle.getPropertyValue("clip-path");
  t5.firstChild.nodeValue = unifyURL(localStr);
  t6.firstChild.nodeValue = unifyURL(absStr);

  cssStyle.setProperty("color-profile", "url(#prof)","");
  localStr = cssStyle.getPropertyValue("color-profile");
  absStr = computedStyle.getPropertyValue("color-profile");
  t7.firstChild.nodeValue = unifyURL(localStr);
  t8.firstChild.nodeValue = unifyURL(absStr);

  cssStyle.setProperty("filter", "url(#filt)","");
  localStr = cssStyle.getPropertyValue("filter");
  absStr = computedStyle.getPropertyValue("filter");
  t9.firstChild.nodeValue  = unifyURL(localStr);
  t10.firstChild.nodeValue = unifyURL(absStr);

  elem = document.getElementById('yyy');
  var cssStyle = elem.getStyle();
  computedStyle = view.getComputedStyle(elem, "");

  cssStyle.setProperty("marker-start", "url(#mark)","");
  localStr = cssStyle.getPropertyValue("marker-start");
  absStr = computedStyle.getPropertyValue("marker-start");
  t11.firstChild.nodeValue = unifyURL(localStr);
  t12.firstChild.nodeValue = unifyURL(absStr);

  cssStyle.setProperty("mask", "url(#mask)","");
  localStr = cssStyle.getPropertyValue("mask");
  absStr = computedStyle.getPropertyValue("mask");
  t13.firstChild.nodeValue = unifyURL(localStr);
  t14.firstChild.nodeValue = unifyURL(absStr);
}

function regardStart() {
  inRegard = true;
}
]]></script><radialGradient id="grad"><stop offset="0" stop-color="gold"/><stop offset="1" stop-color="#dc143c"/></radialGradient><cursor id="cur" x="16" y="16" xlink:href="../../resources/images/hotSpotCenter.png"/><clipPath id="clip" clipPathUnits="objectBoundingBox"><circle cx=".25" cy=".5" r=".4"/><circle cx=".75" cy=".5" r=".4"/></clipPath><color-profile id="prof" name="changeColorAuto" rendering-intent="auto" xlink:href="../../resources/icc/changeColor.icm"/><filter id="filt" width="200%" height="200%" x="0" y="0" filterUnits="objectBoundingBox" primitiveUnits="objectBoundingBox"><feOffset width="50%" height="50%" x="0%" y="0%"/><feTile/></filter><marker id="mark" markerHeight="32" markerUnits="strokeWidth" markerWidth="48" orient="auto" refX="0" refY="0" viewBox="-10 -3 13 6"><g fill="gold" stroke="none"><circle r="3"/><rect width="2" height="7" x="-1" y="0"/><path d="M -3 6 l 6 0 l -3 3 z"/></g></marker><mask id="mask"><g transform="translate(275, 400)"><circle cx="-25" cy="-10" r="25" fill="red"/><circle cx="25" cy="-10" r="25" fill="#0f0"/><circle cx="-25" cy="10" r="25" fill="#00f"/><circle cx="25" cy="10" r="25" fill="#fff"/></g></mask><g><g stroke="#000" transform="translate(30, 75)"><rect width="210" height="30" x="120" y="15" fill="#fff"/><rect width="310" height="30" x="20" y="45" fill="#d3d3d3"/><rect width="310" height="30" x="20" y="75" fill="#fff"/><rect width="310" height="30" x="20" y="105" fill="#d3d3d3"/><rect width="310" height="30" x="20" y="135" fill="#fff"/><rect width="310" height="30" x="20" y="165" fill="#d3d3d3"/><rect width="310" height="30" x="20" y="195" fill="#fff"/><rect width="310" height="30" x="20" y="225" fill="#d3d3d3"/><line x1="225" x2="225" y1="15" y2="255"/><line x1="120" x2="120" y1="15" y2="255"/></g><g text-anchor="middle"><text x="175" y="35" transform="translate(30, 75)">Style</text><text x="275" y="35" transform="translate(30, 75)">Computed</text><text x="75" y="65" transform="translate(30, 75)">fill</text><text x="75" y="95" transform="translate(30, 75)">cursor</text><text x="75" y="125" transform="translate(30, 75)">clip-path</text><text x="75" y="155" transform="translate(30, 75)">color-profile</text><text x="75" y="185" transform="translate(30, 75)">filter</text><text x="75" y="215" transform="translate(30, 75)">marker</text><text x="75" y="245" transform="translate(30, 75)">mask</text></g></g><rect style="fill:#00f" id="xxx" width="100" height="50" x="75" y="375"/><path style="fill:#dc143c" id="yyy" stroke="#000" stroke-width="1" marker-end="url(#mark)" d="M225 375 h 100 v 50 h -100 z"/></svg>