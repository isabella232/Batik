<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?><svg xmlns:xlink="http://www.w3.org/1999/xlink" id="body" width="450" height="500" viewBox="0 0 450 500"><defs><text id="browndef">brown</text><path id="pathdef" d="M250,180 C300,250 500,250 500,180"/><path id="pathdef1" d="M250,380 C300,250 500,250 500,380"/></defs><title>&lt;text&gt; children &apos;onload&apos;</title><text x="50%" y="45" class="title">&lt;text&gt; children in &apos;onload&apos;</text><script type="text/ecmascript"><![CDATA[
    function remove(evt,target){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();
        
        var remove = doc.getElementById(target);
        elt = remove.getParentNode();
        elt.removeChild(remove);
    }
    function addtspan(evt,pos,t,s){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();

        var textnode = elt.getFirstChild();

        textnode = textnode.splitText(pos);

        var tspan = doc.createElementNS(elt.getNamespaceURI(),'tspan');
        tspan.setAttribute('style',s);

        var newtextnode = doc.createTextNode(t);
        
        tspan.appendChild(newtextnode);

        elt.insertBefore(tspan,textnode);
   }
    function addtref(evt,pos,ref,s){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();

        var textnode = elt.getFirstChild();

        textnode = textnode.splitText(pos);

        var tref = doc.createElementNS(elt.getNamespaceURI(),'tref');
        tref.setAttribute('style',s);
        var attr = doc.createAttributeNS("http://www.w3.org/1999/xlink","href");
        attr.setValue(ref);
        tref.setAttributeNodeNS(attr);

        elt.insertBefore(tref,textnode);


   }
    function addtextpath(evt,pos,ref,t,s){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();

        var textnode = elt.getFirstChild();

        textnode = textnode.splitText(pos);

        var textPath = doc.createElementNS(elt.getNamespaceURI(),'textPath');
        textPath.setAttribute('style',s);

        var attr = doc.createAttributeNS("http://www.w3.org/1999/xlink","href");
        attr.setValue(ref);
        textPath.setAttributeNodeNS(attr);

        var newtextnode = doc.createTextNode(t);
        
        textPath.appendChild(newtextnode);

        elt.insertBefore(textPath,textnode);
   }
    
    ]]></script><g id="test-content"><g style="font-size:40"><text x="70" y="115" onload="addtspan(evt,9,' brown','fill:brown')" style="fill:orange">the quick fox</text><text x="70" y="155" onload="addtref(evt,9,'#browndef','fill:brown')" style="fill:orange">the quick fox</text><text x="70" y="195" onload="addtextpath(evt,9,'#pathdef','brown','fill:brown')" style="fill:orange">the quick fox</text><text x="70" y="315" onload="remove(evt,'tspan')" style="fill:orange">the quick <tspan id="tspan" style="fill:brown">brown</tspan> fox</text><text x="70" y="355" onload="remove(evt,'tref')" style="fill:orange">the quick <tref id="tref" xlink:href="#browndef" style="fill:brown"/> fox</text><text x="70" y="395" onload="remove(evt,'textpath')" style="fill:orange">the quick <textPath id="textpath" xlink:href="#pathdef1" style="fill:brown">brown</textPath>fox</text></g><g style="stroke:#000;fill:none;stroke-width:1;font-size:40"><text x="70" y="115">the quick <tspan>brown</tspan> fox</text><text x="70" y="155">the quick <tref xlink:href="#browndef"/> fox</text><text x="70" y="195">the quick <textPath xlink:href="#pathdef">brown</textPath> fox</text><text x="70" y="315">the quick fox</text><text x="70" y="355">the quick fox</text><text x="70" y="395">the quick fox</text></g><g style="fill:#000;stroke:none;text-anchor:middle"><text x="225" y="230">insert nodes <tspan style="font-size:8">( &lt;tspan&gt;,&lt;tref&gt;,&lt;textPath&gt; )</tspan></text><text x="225" y="430">remove nodes <tspan style="font-size:8">( &lt;tspan&gt;,&lt;tref&gt;,&lt;textPath&gt; )</tspan></text></g></g></svg>