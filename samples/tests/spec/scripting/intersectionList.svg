<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="body" width="450" height="500" onload="testIntersection()" viewBox="0 0 450 500"><title>Test of getIntersectionList interface</title><text x="50%" y="45" class="title">Test of getIntersectionList interface</text><script type="text/ecmascript"><![CDATA[
    var svgns = "http://www.w3.org/2000/svg";

    function doCheck(svg, rect, end, attr, val) {
      var lst = svg.getIntersectionList(rect, end);
      var i=0, sz = lst.getLength();
      while (i < sz) {
        var e = lst.item(i);
        e.setAttribute(attr, val);
        i++;
      }
    }

    function setRect(rect, x, y, w, h) {
      rect.x      = x;
      rect.y      = y;
      rect.width  = w;
      rect.height = h;
    }

    function makeRect(parent, rect, stroke) {
      var outline = document.createElementNS(svgns, "rect");
      outline.setAttribute("x", "" + rect.x);
      outline.setAttribute("y", "" + rect.y);
      outline.setAttribute("width", "" + rect.width);
      outline.setAttribute("height", "" + rect.height);
      outline.setAttribute("fill", "none");
      outline.setAttribute("stroke", stroke);
      parent.appendChild(outline);
    }

    function checkIntersection(svg, rect, elem, attr, val1, val2) {
       if (svg.checkIntersection(elem, rect)) 
           elem.setAttribute(attr, val1);
       else 
           elem.setAttribute(attr, val2);
    }
   

    function testIntersection() {
      var root = document.getRootElement();
      var rect = root.createSVGRect();
      setRect(rect, 50, 95, 50, 50);

      doCheck(root, rect, null, "fill", "blue");
      makeRect(root, rect, "blue");

      setRect(rect, 45, 90, 60, 60);
      var middle = root.getElementById("tb1-middle");
      doCheck(root, rect, middle, "stroke", "red");
      makeRect(root, rect, "red");

      var tb2 = root.getElementById("testblock2");
      setRect(rect, 45, 60, 450, 20);
      doCheck(tb2, rect, null, "fill", "green");
      makeRect(tb2, rect, "green");

      setRect(rect, 187.5, 139, 224, 10);
      doCheck(root, rect, null, "stroke", "pink");
      makeRect(root, rect, "pink");

      setRect(rect, 82.35, 267.15, 35.25, 35.25);
      doCheck(root, rect, null, "stroke", "lightgreen");

      setRect(rect, 90.65, 275.25, 19, 19);
      doCheck(root, rect, null, "fill", "purple");
      makeRect(root, rect, "purple");
      setRect(rect, 82.35, 267.15, 35.25, 35.25);
      makeRect(root, rect, "lightgreen");

      var tb5   = root.getElementById("testblock5");
      var tb5_m = root.getElementById("tb5-middle");
      setRect(rect, 45, 160, 150, 20);
      doCheck(tb5, rect, tb5_m, "fill", "crimson");
      makeRect(tb5, rect, "crimson");

      var ts = root.getElementById("ts");
      setRect(rect, 235, 200, 2, 50);
      doCheck(root, rect, ts, "fill", "orange");
      doCheck(root, rect, null, "text-decoration", "underline");
      makeRect(root, rect, "orange");
      setRect(rect, 255, 200, 2, 50);
      doCheck(root, rect, ts, "stroke", "crimson");
      makeRect(root, rect, "crimson");
      


      var tb6   = root.getElementById("testblock6");
      var tb6_m = root.getElementById("tb6-middle");

      var tb6_11 = root.getElementById("tb6-11");
      var tb6_21 = root.getElementById("tb6-21");
      var tb6_31 = root.getElementById("tb6-31");
      var tb6_41 = root.getElementById("tb6-41");

      var tb6_12 = root.getElementById("tb6-12");
      var tb6_22 = root.getElementById("tb6-22");
      var tb6_32 = root.getElementById("tb6-32");
      var tb6_42 = root.getElementById("tb6-42");

      var tb6_13 = root.getElementById("tb6-13");
      var tb6_23 = root.getElementById("tb6-23");
      var tb6_43 = root.getElementById("tb6-43");

      var tb6_14 = root.getElementById("tb6-14");
      var tb6_24 = root.getElementById("tb6-24");
      var tb6_34 = root.getElementById("tb6-34");
      var tb6_44 = root.getElementById("tb6-44");

      setRect(rect, 190, 300, 70, 70);
      checkIntersection(root, rect, tb6_11, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_21, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_31, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_41, "fill", "blue", "crimson");

      checkIntersection(root, rect, tb6_12, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_22, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_32, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_42, "fill", "blue", "crimson");

      checkIntersection(root, rect, tb6_13, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_23, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_m, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_43, "fill", "blue", "crimson");

      checkIntersection(root, rect, tb6_14, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_24, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_34, "fill", "blue", "crimson");
      checkIntersection(root, rect, tb6_44, "fill", "blue", "crimson");

      makeRect(root, rect, "blue");

    }
    ]]></script><g id="test-content"><svg id="testblock1" width="120" height="120" x="15" y="60" overflow="visible" viewBox="-0.5 -0.5 241 241" style="fill:#ff0;stroke:#000;stroke-width:2;fill-opacity:.5"><path d="M 10 10 h 220 v 220 h -220 z m 20 20 v 180 h 180 v -180 z"/><rect width="40" height="40" x="0" y="0"/><rect width="40" height="40" x="50" y="0"/><rect width="40" height="40" x="100" y="0"/><rect width="40" height="40" x="150" y="0"/><rect width="40" height="40" x="200" y="0"/><rect width="40" height="40" x="0" y="50"/><rect width="40" height="40" x="50" y="50"/><rect width="40" height="40" x="100" y="50"/><rect width="40" height="40" x="150" y="50"/><rect width="40" height="40" x="200" y="50"/><rect width="40" height="40" x="0" y="100"/><rect width="40" height="40" x="50" y="100"/><rect id="tb1-middle" width="40" height="40" x="100" y="100"/><rect width="40" height="40" x="150" y="100"/><rect width="40" height="40" x="200" y="100"/><rect width="40" height="40" x="0" y="150"/><rect width="40" height="40" x="50" y="150"/><rect width="40" height="40" x="100" y="150"/><rect width="40" height="40" x="150" y="150"/><rect width="40" height="40" x="200" y="150"/><rect width="40" height="40" x="0" y="200"/><rect width="40" height="40" x="50" y="200"/><rect width="40" height="40" x="100" y="200"/><rect width="40" height="40" x="150" y="200"/><rect width="40" height="40" x="200" y="200"/></svg><svg id="testblock2" width="120" height="120" x="165" y="60" overflow="visible" viewBox="-0.5 -0.5 241 241" style="fill:#ff0;stroke:#000;stroke-width:2;fill-opacity:.5"><path d="M 10 10 h 220 v 220 h -220 z m 20 20 v 180 h 180 v -180 z"/><rect width="40" height="40" x="0" y="0"/><rect width="40" height="40" x="50" y="0"/><rect width="40" height="40" x="100" y="0"/><rect width="40" height="40" x="150" y="0"/><rect width="40" height="40" x="200" y="0"/><rect width="40" height="40" x="0" y="50"/><rect width="40" height="40" x="50" y="50"/><rect width="40" height="40" x="100" y="50"/><rect width="40" height="40" x="150" y="50"/><rect width="40" height="40" x="200" y="50"/><rect width="40" height="40" x="0" y="100"/><rect width="40" height="40" x="50" y="100"/><rect id="tb2-middle" width="40" height="40" x="100" y="100"/><rect width="40" height="40" x="150" y="100"/><rect width="40" height="40" x="200" y="100"/><rect width="40" height="40" x="0" y="150"/><rect width="40" height="40" x="50" y="150"/><rect width="40" height="40" x="100" y="150"/><rect width="40" height="40" x="150" y="150"/><rect width="40" height="40" x="200" y="150"/><rect width="40" height="40" x="0" y="200"/><rect width="40" height="40" x="50" y="200"/><rect width="40" height="40" x="100" y="200"/><rect width="40" height="40" x="150" y="200"/><rect width="40" height="40" x="200" y="200"/></svg><svg id="testblock3" width="120" height="120" x="315" y="60" overflow="visible" viewBox="-0.5 -0.5 241 241" style="fill:#ff0;stroke:#000;stroke-width:2;fill-opacity:.5"><path d="M 10 10 h 220 v 220 h -220 z m 20 20 v 180 h 180 v -180 z"/><rect width="40" height="40" x="0" y="0"/><rect width="40" height="40" x="50" y="0"/><rect width="40" height="40" x="100" y="0"/><rect width="40" height="40" x="150" y="0"/><rect width="40" height="40" x="200" y="0"/><rect width="40" height="40" x="0" y="50"/><rect width="40" height="40" x="50" y="50"/><rect width="40" height="40" x="100" y="50"/><rect width="40" height="40" x="150" y="50"/><rect width="40" height="40" x="200" y="50"/><rect width="40" height="40" x="0" y="100"/><rect width="40" height="40" x="50" y="100"/><rect id="tb3-middle" width="40" height="40" x="100" y="100"/><rect width="40" height="40" x="150" y="100"/><rect width="40" height="40" x="200" y="100"/><rect width="40" height="40" x="0" y="150"/><rect width="40" height="40" x="50" y="150"/><rect width="40" height="40" x="100" y="150"/><rect width="40" height="40" x="150" y="150"/><rect width="40" height="40" x="200" y="150"/><rect width="40" height="40" x="0" y="200"/><rect width="40" height="40" x="50" y="200"/><rect width="40" height="40" x="100" y="200"/><rect width="40" height="40" x="150" y="200"/><rect width="40" height="40" x="200" y="200"/></svg><g transform="translate(100,200) rotate(45)"><svg id="testblock4" width="120" height="120" overflow="visible" viewBox="-0.5 -0.5 241 241" style="fill:#ff0;stroke:#000;stroke-width:2;fill-opacity:.5"><path d="M 10 10 h 220 v 220 h -220 z m 20 20 v 180 h 180 v -180 z"/><rect width="40" height="40" x="0" y="0"/><rect width="40" height="40" x="50" y="0"/><rect width="40" height="40" x="100" y="0"/><rect width="40" height="40" x="150" y="0"/><rect width="40" height="40" x="200" y="0"/><rect width="40" height="40" x="0" y="50"/><rect width="40" height="40" x="50" y="50"/><rect width="40" height="40" x="100" y="50"/><rect width="40" height="40" x="150" y="50"/><rect width="40" height="40" x="200" y="50"/><rect width="40" height="40" x="0" y="100"/><rect width="40" height="40" x="50" y="100"/><g><rect id="tb4-middle" width="40" height="40" x="100" y="100"/></g><rect width="40" height="40" x="150" y="100"/><rect width="40" height="40" x="200" y="100"/><rect width="40" height="40" x="0" y="150"/><rect width="40" height="40" x="50" y="150"/><rect width="40" height="40" x="100" y="150"/><rect width="40" height="40" x="150" y="150"/><rect width="40" height="40" x="200" y="150"/><rect width="40" height="40" x="0" y="200"/><rect width="40" height="40" x="50" y="200"/><rect width="40" height="40" x="100" y="200"/><rect width="40" height="40" x="150" y="200"/><rect width="40" height="40" x="200" y="200"/></svg></g><g transform="translate(350,200) rotate(45)"><svg id="testblock5" width="120" height="120" overflow="visible" viewBox="-0.5 -0.5 241 241" style="fill:#ff0;stroke:#000;stroke-width:2;fill-opacity:.5"><path d="M 10 10 h 220 v 220 h -220 z m 20 20 v 180 h 180 v -180 z"/><rect width="40" height="40" x="0" y="0"/><rect width="40" height="40" x="50" y="0"/><rect width="40" height="40" x="100" y="0"/><rect width="40" height="40" x="150" y="0"/><rect width="40" height="40" x="200" y="0"/><rect width="40" height="40" x="0" y="50"/><rect width="40" height="40" x="50" y="50"/><rect width="40" height="40" x="100" y="50"/><rect width="40" height="40" x="150" y="50"/><rect width="40" height="40" x="200" y="50"/><rect width="40" height="40" x="0" y="100"/><rect width="40" height="40" x="50" y="100"/><g><rect id="tb5-middle" width="40" height="40" x="100" y="100"/></g><rect width="40" height="40" x="150" y="100"/><rect width="40" height="40" x="200" y="100"/><rect width="40" height="40" x="0" y="150"/><rect width="40" height="40" x="50" y="150"/><rect width="40" height="40" x="100" y="150"/><rect width="40" height="40" x="150" y="150"/><rect width="40" height="40" x="200" y="150"/><rect width="40" height="40" x="0" y="200"/><rect width="40" height="40" x="50" y="200"/><rect width="40" height="40" x="100" y="200"/><rect width="40" height="40" x="150" y="200"/><rect width="40" height="40" x="200" y="200"/></svg></g><g transform="translate(225,285) rotate(45)"><svg id="testblock6" width="120" height="120" overflow="visible" viewBox="-0.5 -0.5 241 241" style="fill:#ff0;stroke:#000;stroke-width:2;fill-opacity:.5"><path d="M 10 10 h 220 v 220 h -220 z m 20 20 v 180 h 180 v -180 z"/><rect id="tb6-11" width="40" height="40" x="0" y="0"/><rect id="tb6-21" width="40" height="40" x="50" y="0"/><rect id="tb6-31" width="40" height="40" x="100" y="0"/><rect id="tb6-41" width="40" height="40" x="150" y="0"/><rect id="tb6-51" width="40" height="40" x="200" y="0"/><rect id="tb6-12" width="40" height="40" x="0" y="50"/><rect id="tb6-22" width="40" height="40" x="50" y="50" pointer-events="none"/><rect id="tb6-32" width="40" height="40" x="100" y="50"/><rect id="tb6-42" width="40" height="40" x="150" y="50"/><rect id="tb6-52" width="40" height="40" x="200" y="50"/><rect id="tb6-13" width="40" height="40" x="0" y="100"/><rect id="tb6-23" width="40" height="40" x="50" y="100"/><g><rect id="tb6-middle" width="40" height="40" x="100" y="100"/></g><rect id="tb6-43" width="40" height="40" x="150" y="100"/><rect id="tb6-53" width="40" height="40" x="200" y="100"/><rect id="tb6-14" width="40" height="40" x="0" y="150"/><rect id="tb6-24" width="40" height="40" x="50" y="150"/><rect id="tb6-34" width="40" height="40" x="100" y="150"/><rect id="tb6-44" width="40" height="40" x="150" y="150"/><rect id="tb6-54" width="40" height="40" x="200" y="150"/><rect id="tb6-15" width="40" height="40" x="0" y="200"/><rect id="tb6-25" width="40" height="40" x="50" y="200"/><rect id="tb6-35" width="40" height="40" x="100" y="200"/><rect id="tb6-45" width="40" height="40" x="150" y="200"/><rect id="tb6-55" width="40" height="40" x="200" y="200"/></svg></g><text x="225" y="220" font-size="15" text-anchor="middle">This <tspan id="ts" font-weight="bold">is <tspan font-style="italic">a</tspan> test</tspan> <tspan x="225" y="240" text-anchor="middle">of text intersection</tspan></text></g></svg>