<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?><svg xmlns:xlink="http://www.w3.org/1999/xlink" id="body" width="450" height="500" viewBox="0 0 450 500"><defs><text id="browndef">brown</text><path id="pathdef" d="M250,180 C300,250 500,250 500,180"/><path id="pathdef1" d="M250,380 C300,250 500,250 500,380"/></defs><title>&lt;tspan&gt; children &apos;onload&apos;</title><text x="50%" y="45" class="title">&lt;tspan&gt; children in &apos;onload&apos;</text><script type="text/ecmascript"><![CDATA[
    function remove(evt,target){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();
        
        var remove = doc.getElementById(target);
        elt = remove.getParentNode();
        elt.removeChild(remove);
    }
    function addtspan(evt,pos,t,s){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();

        var textnode = elt.getFirstChild();

        textnode = textnode.splitText(pos);

        var tspan = doc.createElementNS(elt.getNamespaceURI(),'tspan');
        tspan.setAttribute('style',s);

        var newtextnode = doc.createTextNode(t);
        
        tspan.appendChild(newtextnode);

        elt.insertBefore(tspan,textnode);
   }
    function addtref(evt,pos,ref,s){
        var elt = evt.target;
        var doc = elt.getOwnerDocument();

        var textnode = elt.getFirstChild();

        textnode = textnode.splitText(pos);

        var tref = doc.createElementNS(elt.getNamespaceURI(),'tref');
        tref.setAttribute('style',s);
        var attr = doc.createAttributeNS("http://www.w3.org/1999/xlink","href");
        attr.setValue(ref);
        tref.setAttributeNodeNS(attr);

        elt.insertBefore(tref,textnode);


   }
    
    ]]></script><g id="test-content"><g style="font-size:40"><text style="fill:orange" x="70" y="115"><tspan onload="addtspan(evt,9,' brown','fill:brown')">the quick fox</tspan></text><text style="fill:orange" x="70" y="155"><tspan onload="addtref(evt,9,'#browndef','fill:brown')">the quick fox</tspan></text><text style="fill:orange" x="70" y="315"><tspan onload="remove(evt,'tspan')">the quick <tspan style="fill:brown" id="tspan">brown</tspan> fox</tspan></text><text style="fill:orange" x="70" y="355"><tspan onload="remove(evt,'tref')">the quick <tref style="fill:brown" id="tref" xlink:href="#browndef"/> fox</tspan></text></g><g style="stroke:#000;fill:none;stroke-width:1;font-size:40"><text x="70" y="115">the quick <tspan>brown</tspan> fox</text><text x="70" y="155">the quick <tref xlink:href="#browndef"/> fox</text><text x="70" y="315">the quick fox</text><text x="70" y="355">the quick fox</text></g><g style="fill:#000;stroke:none;text-anchor:middle"><text x="225" y="230">insert nodes <tspan style="font-size:8">( &lt;tspan&gt;,&lt;tref&gt; )</tspan></text><text x="225" y="430">remove nodes <tspan style="font-size:8">( &lt;tspan&gt;,&lt;tref&gt; )</tspan></text></g></g></svg>