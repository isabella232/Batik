<?xml-stylesheet type="text/css" href="../../resources/style/test.css" ?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="body" width="450" height="500" viewBox="0 0 450 500"><title>Update on &lt;use&gt;</title><text x="50%" y="45" class="title">x/y/transform update on &lt;use&gt;</text><script type="text/ecmascript"><![CDATA[
    var xlinkNS = 'http://www.w3.org/1999/xlink';
    var svgNS = 'http://www.w3.org/2000/svg';

    function runTest(){
        document.getElementById('x').setAttributeNS(null, 'x', '20');
        document.getElementById('y').setAttributeNS(null, 'y', '15');
        document.getElementById('transform').setAttributeNS(null, 'transform', 'rotate(20)');
        document.getElementById('xlink').setAttributeNS(xlinkNS, 'xlink:href', '#symbol2');

        var mutated = document.getElementById('mutatedSymbol');
        while(mutated.firstChild != null) {
            mutated.removeChild(mutated.firstChild);
        }
        var r = document.createElementNS(svgNS, 'rect');
        r.setAttributeNS(null, "x", "-10");
        r.setAttributeNS(null, "y", "-10");
        r.setAttributeNS(null, "width", "20");
        r.setAttributeNS(null, "height", "20");
        r.setAttributeNS(null, "stroke-width", "4");
        r.setAttributeNS(null, "stroke", "gold");
        r.setAttributeNS(null, "fill", "crimson");
        mutated.appendChild(r);

        var t = document.createElementNS(svgNS, "text");
        mutated.appendChild(t);
        t.setAttributeNS(null, "text-anchor", "middle");
        t.setAttributeNS(null, "fill", "gold");
        t.setAttributeNS(null, "stroke", "none");
        t.setAttributeNS(null, "y", "5");
        var msg = document.createTextNode("Hello");
        t.appendChild(msg);

        msg.data = "Hi";
    }

    ]]></script><rect id="symbol" width="20" height="20" x="-10" y="-10"/><defs><rect id="symbol" width="20" height="20" x="-10" y="-10"/><rect id="symbol2" width="20" height="20" x="-10" y="-10" fill="#dc143c" stroke="gold" stroke-width="4"/><g id="mutatedSymbolReference"><rect width="20" height="20" x="-10" y="-10" fill="#dc143c" stroke="gold" stroke-width="4"/><text y="5" fill="gold" stroke="none" text-anchor="middle">Hi</text></g><g id="mutatedSymbol"><rect width="24" height="24" x="-12" y="-12" class="reference"/></g><rect id="titleCell" width="120" height="20" x="-60" y="-15"/><rect id="tableCell" width="120" height="40" x="-60" y="-20"/><rect id="button" width="60" height="20" x="-30" y="-15"/></defs><style type="text/css">use.tableHeader{fill:#eee;stroke:#000}use.tableCell{fill:#fff;stroke:#000}.reference,use.button{stroke:#000;fill:none}use.button{fill:#eee}text.button,text.tableCell,text.tableHeader{fill:#000;stroke:none;text-anchor:middle}.symbol{fill:gold;stroke:#dc143c;stroke-width:4}</style><g transform="translate(165, 120)"><g id="tableHeader" class="tableHeader"><g><use class="tableHeader" xlink:href="#titleCell"/><text class="tableHeader">Attribute</text></g><g transform="translate(120,0)"><use class="tableHeader" xlink:href="#titleCell"/><text class="tableHeader">&lt;use&gt; and ref</text></g></g><g id="xRow"><g transform="translate(0,25)"><use class="tableCell" xlink:href="#tableCell"/><text class="tableCell">x</text></g><g transform="translate(0,25) translate(120,0)"><use class="tableCell" xlink:href="#tableCell"/><use id="x" x="10" y="5" class="symbol" xlink:href="#symbol"/><use x="20" y="5" class="reference" xlink:href="#symbol"/></g></g><g id="yRow"><g transform="translate(0,65)"><use class="tableCell" xlink:href="#tableCell"/><text class="tableCell">y</text></g><g transform="translate(0,65) translate(120,0)"><use class="tableCell" xlink:href="#tableCell"/><use id="y" x="10" y="0" class="symbol" xlink:href="#symbol"/><use x="10" y="15" class="reference" xlink:href="#symbol"/></g></g><g id="transformRow"><g transform="translate(0,105)"><use class="tableCell" xlink:href="#tableCell"/><text class="tableCell">transform</text></g><g transform="translate(0,105) translate(120,0)"><use class="tableCell" xlink:href="#tableCell"/><use id="transform" x="10" y="5" class="symbol" xlink:href="#symbol"/><use x="10" y="5" class="reference" transform="rotate(20)" xlink:href="#symbol"/></g></g><g id="xlinkRow"><g transform="translate(0,145)"><use class="tableCell" xlink:href="#tableCell"/><text class="tableCell">xlink:href</text></g><g transform="translate(0,145) translate(120,0)"><use class="tableCell" xlink:href="#tableCell"/><use id="xlink" x="5" y="0" class="symbol" xlink:href="#symbol"/><use x="5" y="0" class="reference" xlink:href="#symbol"/></g></g><g id="mutation"><g transform="translate(0,185)"><use class="tableCell" xlink:href="#tableCell"/><text class="tableCell">mutation</text></g><g transform="translate(0,185) translate(120,0)"><use class="tableCell" xlink:href="#tableCell"/><use id="xlink" x="-25" y="0" class="symbol" xlink:href="#mutatedSymbolReference"/><use x="25" y="0" class="reference" xlink:href="#mutatedSymbol"/></g></g><g onclick="runTest()" transform="translate(0, 80)"><use x="60" y="200" class="button" xlink:href="#button"/><text x="60" y="200" class="button">Run Test</text></g></g><script type="text/ecmascript"><![CDATA[
function onDone() {
    if (!(regardTestInstance == null)) {
        regardTestInstance.scriptDone();   
    } else {
        alert("This button only works when run in the regard framework");
    }
}
    ]]></script><g id="done" cursor="pointer" onclick="onDone()" transform="translate(195, 468)"><rect width="60" height="25" fill="#eee" stroke="#000" rx="5" ry="5"/><text x="30" y="18" font-size="14" font-weight="bold" text-anchor="middle">Done</text></g></svg>